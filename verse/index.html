<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Instagram Story Maker</title>
    <link
      href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <link
      href="https://use.typekit.net/nyp5qmz.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <link href="app.css?v=1" rel="stylesheet" />
    <script
      src="https://unpkg.com/vue@3.1.1/dist/vue.global.prod.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div id="app" class="flex flex-row-reverse min-h-screen">
      <!-- <div class="fixed top-0 left-0 bg-royal h-2 transform transition-all" :style="{width: progress + '%'}"></div> -->

      <div id="tools" class="bg-gray p-8 pb-36 w-1/4">
        <div class="sticky top-8">
          <label
            for="textA"
            class="uppercase text-sm text-white tracking-widest mb-1 block"
            >Text 1</label
          >
          <textarea
            id="textA"
            class="block w-full rounded-sm p-3 mb-4"
            maxlength="100"
            v-model="textA"
            rows="2"
          ></textarea>

          <label
            v-if="(layout !== 'layout-2') && (layout !== 'layout-7')"
            for="textB"
            class="uppercase text-sm text-white tracking-widest mb-1 block"
            >Text 2</label
          >
          <textarea
            v-if="(layout !== 'layout-2') && (layout !== 'layout-7')"
            id="textB"
            class="block w-full rounded-sm p-3 mb-4"
            maxlength="100"
            v-model="textB"
            rows="2"
          ></textarea>

          <label
            v-if="(layout !== 'layout-2') && (layout !== 'layout-7')"
            for="textC"
            class="uppercase text-sm text-white tracking-widest mb-1 block"
            >Text 3</label
          >
          <textarea
            v-if="(layout !== 'layout-2') && (layout !== 'layout-7')"
            id="textC"
            class="block w-full rounded-sm p-3 mb-4"
            maxlength="100"
            v-model="textC"
            rows="2"
          ></textarea>

          <label
            for="textD"
            class="uppercase text-sm text-white tracking-widest mb-1 block"
            >Book / Chapter / Verse</label
          >
          <textarea
            id="textD"
            class="block w-full rounded-sm p-3 mb-8"
            maxlength="100"
            v-model="textD"
            rows="1"
          ></textarea>

          <!-- color schemes -->

          <h2 class="uppercase text-sm text-white tracking-widest mb-1">
            Color Scheme
          </h2>
          <div class="flex flex-wrap -m-1 mb-8">
            <a
              href="#"
              @click.prevent="scheme = 'scheme-1'"
              class="bg-maroon w-10 h-10 rounded-full border-4 border-white m-1"
              :class="scheme === 'scheme-1' ? 'active' : ''"
            ></a>
            <a
              href="#"
              @click.prevent="scheme = 'scheme-2'"
              class="bg-teal w-10 h-10 rounded-full border-4 border-white m-1"
              :class="scheme === 'scheme-2' ? 'active' : ''"
            ></a>
            <a
              href="#"
              @click.prevent="scheme = 'scheme-3'"
              class="bg-royal w-10 h-10 rounded-full border-4 border-white m-1"
              :class="scheme === 'scheme-3' ? 'active' : ''"
            ></a>
            <a
              href="#"
              @click.prevent="scheme = 'scheme-4'"
              class="
                bg-redOrange
                w-10
                h-10
                rounded-full
                border-4 border-white
                m-1
              "
              :class="scheme === 'scheme-4' ? 'active' : ''"
            ></a>
            <a
              href="#"
              @click.prevent="scheme = 'scheme-5'"
              class="bg-sky w-10 h-10 rounded-full border-4 border-white m-1"
              :class="scheme === 'scheme-5' ? 'active' : ''"
            ></a>
            <a
              href="#"
              @click.prevent="scheme = 'scheme-6'"
              class="
                bg-marigold
                w-10
                h-10
                rounded-full
                border-4 border-white
                m-1
              "
              :class="scheme === 'scheme-6' ? 'active' : ''"
            ></a>
            <a
              href="#"
              @click.prevent="scheme = 'scheme-7'"
              class="bg-storm w-10 h-10 rounded-full border-4 border-white m-1"
              :class="scheme === 'scheme-7' ? 'active' : ''"
            ></a>
            <a
              href="#"
              @click.prevent="scheme = 'scheme-8'"
              class="
                bg-dark-maroon
                w-10
                h-10
                rounded-full
                border-4 border-white
                m-1
              "
              :class="scheme === 'scheme-8' ? 'active' : ''"
            ></a>
            <a
              href="#"
              @click.prevent="scheme = 'scheme-9'"
              class="bg-silver w-10 h-10 rounded-full border-4 border-white m-1"
              :class="scheme === 'scheme-9' ? 'active' : ''"
            ></a>
            <a
              href="#"
              @click.prevent="scheme = 'scheme-10'"
              class="bg-cream w-10 h-10 rounded-full border-4 border-white m-1"
              :class="scheme === 'scheme-10' ? 'active' : ''"
            ></a>
            <a
              href="#"
              @click.prevent="scheme = 'scheme-11'"
              class="bg-salmon w-10 h-10 rounded-full border-4 border-white m-1"
              :class="scheme === 'scheme-11' ? 'active' : ''"
            ></a>
            <a
              href="#"
              @click.prevent="scheme = 'scheme-12'"
              class="bg-navy w-10 h-10 rounded-full border-4 border-white m-1"
              :class="scheme === 'scheme-12' ? 'active' : ''"
            ></a>
            <a
              href="#"
              @click.prevent="scheme = 'scheme-13'"
              class="bg-ethos w-10 h-10 rounded-full border-4 border-white m-1"
              :class="scheme === 'scheme-13' ? 'active' : ''"
            ></a>
            <a
              href="#"
              @click.prevent="scheme = 'scheme-14'"
              class="bg-white w-10 h-10 rounded-full border-4 border-white m-1"
              :class="scheme === 'scheme-14' ? 'active' : ''"
            ></a>
          </div>
          <!-- color schemes -->

          <!-- layouts -->
          <h2 class="uppercase text-sm text-white tracking-widest mb-1">
            Layout
          </h2>
          <div class="flex flex-wrap -m-1 mb-8">
            <a href="#" @click.prevent="layout = 'layout-1'">
              <div
                class="
                  thumb
                  flex flex-col
                  layout-1
                  border-4 border-white
                  rounded-md
                  m-1
                "
                :class="[scheme, layout === 'layout-1' ? 'active' : '']"
              >
                <div
                  class="
                    text
                    flex-1 flex
                    text-white
                    items-center
                    justify-center
                  "
                >
                  <div
                    class="border-t border-b border-white h-2 w-2/3 opacity-50"
                  ></div>
                </div>
              </div>
            </a>
            <a href="#" @click.prevent="layout = 'layout-2'">
              <div
                class="
                  thumb
                  flex flex-col
                  layout-2
                  border-4 border-white
                  rounded-md
                  m-1
                "
                :class="[scheme, layout === 'layout-2' ? 'active' : '']"
              >
                <div class="img bg-black bg-opacity-50">
                  <img
                    v-if="img"
                    :src="img"
                    class="object-cover w-full h-full"
                  />
                </div>
                <div
                  class="
                    text
                    flex-1 flex
                    text-white
                    items-center
                    justify-center
                  "
                >
                  <div
                    class="border-t border-b border-white h-2 w-2/3 opacity-50"
                  ></div>
                </div>
              </div>
            </a>
            <a href="#" @click.prevent="layout = 'layout-3'">
              <div
                class="
                  thumb
                  flex flex-col
                  layout-3
                  border-4 border-white
                  rounded-md
                  m-1
                "
                :class="[scheme, layout === 'layout-3' ? 'active' : '']"
              >
                <div class="img bg-black bg-opacity-50">
                  <img
                    v-if="img"
                    :src="img"
                    class="object-cover w-full h-full"
                  />
                </div>
                <div
                  class="
                    text
                    flex-1 flex
                    text-white
                    items-center
                    justify-center
                  "
                >
                  <div
                    class="border-t border-b border-white h-2 w-2/3 opacity-50"
                  ></div>
                </div>
              </div>
            </a>
            <a href="#" @click.prevent="layout = 'layout-4'">
              <div
                class="
                  thumb
                  flex flex-col
                  layout-4
                  border-4 border-white
                  rounded-md
                  m-1
                "
                :class="[scheme, layout === 'layout-4' ? 'active' : '']"
              >
                <div class="img bg-black bg-opacity-50">
                  <img
                    v-if="img"
                    :src="img"
                    class="object-cover w-full h-full"
                  />
                </div>
                <div
                  class="
                    text
                    flex-1 flex
                    text-white
                    items-center
                    justify-center
                  "
                >
                  <div
                    class="
                      border-t border-b border-white
                      h-2
                      w-2/3
                      opacity-50
                      my-2
                    "
                  ></div>
                </div>
              </div>
            </a>
            <a href="#" @click.prevent="layout = 'layout-5'">
              <div
                class="
                  thumb
                  flex flex-col
                  layout-4
                  flex-col-reverse
                  border-4 border-white
                  rounded-md
                  m-1
                "
                :class="[scheme, layout === 'layout-5' ? 'active' : '']"
              >
                <div class="img bg-black bg-opacity-50">
                  <img
                    v-if="img"
                    :src="img"
                    class="object-cover w-full h-full"
                  />
                </div>
                <div
                  class="
                    text
                    flex-1 flex
                    text-white
                    items-center
                    justify-center
                  "
                >
                  <div
                    class="
                      border-t border-b border-white
                      h-2
                      w-2/3
                      opacity-50
                      my-2
                    "
                  ></div>
                </div>
              </div>
            </a>
            <a href="#" @click.prevent="layout = 'layout-6'">
              <div
                class="
                  thumb
                  flex flex-col
                  layout-3
                  flex-col-reverse
                  border-4 border-white
                  rounded-md
                  m-1
                "
                :class="[scheme, layout === 'layout-6' ? 'active' : '']"
              >
                <div class="img bg-black bg-opacity-50">
                  <img
                    v-if="img"
                    :src="img"
                    class="object-cover w-full h-full"
                  />
                </div>
                <div
                  class="
                    text
                    flex-1 flex
                    text-white
                    items-center
                    justify-center
                  "
                >
                  <div
                    class="border-t border-b border-white h-2 w-2/3 opacity-50"
                  ></div>
                </div>
              </div>
            </a>
            <a href="#" @click.prevent="layout = 'layout-7'">
              <div
                class="
                  thumb
                  flex flex-col
                  layout-2
                  flex-col-reverse
                  border-4 border-white
                  rounded-md
                  m-1
                "
                :class="[scheme, layout === 'layout-7' ? 'active' : '']"
              >
                <div class="img bg-black bg-opacity-50">
                  <img
                    v-if="img"
                    :src="img"
                    class="object-cover w-full h-full"
                  />
                </div>
                <div
                  class="
                    text
                    flex-1 flex
                    text-white
                    items-center
                    justify-center
                  "
                >
                  <div
                    class="border-t border-b border-white h-2 w-2/3 opacity-50"
                  ></div>
                </div>
              </div>
            </a>
            <a href="#" @click.prevent="layout = 'layout-8'">
              <div
                class="
                  thumb
                  flex flex-col
                  layout-5
                  relative
                  border-4 border-white
                  rounded-md
                  m-1
                "
                :class="[scheme, layout === 'layout-8' ? 'active' : '']"
              >
                <div class="img bg-black bg-opacity-50">
                  <img
                    v-if="img"
                    :src="img"
                    class="object-cover w-full h-full"
                  />
                </div>
                <div
                  class="
                    text
                    flex-1 flex
                    text-white
                    items-center
                    justify-center
                  "
                >
                  <div
                    class="border-t border-b border-white h-2 w-2/3 opacity-50"
                  ></div>
                </div>
              </div>
            </a>
          </div>
          <!-- /layouts -->

          <!-- image upload -->
          <!-- <label
            for="imgUpload"
            class="
              uppercase
              text-sm text-white
              tracking-widest
              mb-1
              block
              border-2
              p-6
              text-center
              cursor-pointer
            "
            >&plus; Upload <span v-if="img">a different</span
            ><span v-else>an</span> Image</label
          >
          <input
            id="imgUpload"
            type="file"
            accept="image/*"
            class="hidden"
            @change="uploadImage"
          /> -->
          <!-- /image upload -->

          <div
            class="
              fixed
              bottom-0
              right-0
              p-8
              w-1/4
              bg-gray
              border-t border-opacity-20 border-white
            "
          >
            <a
              href="#"
              @click.prevent="build"
              class="
                uppercase
                text-sm text-white
                tracking-widest
                mb-1
                block
                bg-royal
                p-6
                text-center
                cursor-pointer
              "
              >&darr; Download it!
            </a>
          </div>
        </div>
      </div>

      <!-- viewport -->
      <div
        id="viewport"
        class="
          bg-gray-100
          p-8
          flex-1 flex
          items-center
          justify-center
          flex-wrap
        "
      >
        <code
          class="
            fixed
            top-0
            left-0
            text-sm
            p-3
            bg-black
            text-white
            bg-opacity-50
          "
          >{{layout}} | {{scheme}}</code
        >

        <!-- ig canvas -->
        <div class="m-4">
          <div id="ig" class="relative overflow-hidden" :class="scheme, layout">
            <svg
              class="logo absolute right-0 z-10"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              version="1.1"
              id="Layer_1"
              x="0px"
              y="0px"
              viewBox="0 0 411.1 266.3"
              style="enable-background: new 0 0 411.1 266.3"
              xml:space="preserve"
            >
              <g>
                <g transform="translate(-1508.861 -8196.49)">
                  <path
                    class="logo-fill"
                    d="M1646,8396.2c-37.9,0-68.6-29.8-68.6-66.6s30.7-66.6,68.6-66.6s68.6,29.8,68.6,66.6    S1683.9,8396.2,1646,8396.2 M1920,8263.1L1920,8263.1l0-66.6c-73.4,0-133.4,55.9-137.1,126.3c-3.7-70.3-63.6-126.2-137-126.2    c-75.7,0-137.1,59.6-137.1,133.1s61.4,133.1,137.1,133.1c73.4,0,133.3-55.9,137-126.2c3.7,70.4,63.6,126.3,137.1,126.3v-66.6h0    c-37.8,0-68.6-29.9-68.6-66.6S1882.2,8263.1,1920,8263.1"
                  ></path>
                </g>
              </g>
            </svg>

            <div class="text">
              <div class="text-a">{{ textA }}</div>
              <div
                v-if="layout === 'layout-2'"
                class="text-b"
                :style="{fontSize: (22 / textB.length) + 'rem', marginRight: '-.22em'}"
              >
                {{ textB }}
              </div>
              <div
                v-else-if="layout === 'layout-6'"
                v-html="textBSplit"
                class="text-b"
                :style="{fontSize: (20 / textB.length) + 'rem'}"
              ></div>
              <div v-else class="text-b">{{ textB }}</div>
              <div v-if="layout !== 'layout-2'" class="text-c">{{ textC }}</div>
              <div class="text-d">{{ textD }}</div>
            </div>
          </div>
        </div>
        <!-- /ig canvas -->

        <!-- fb canvas -->
        <div class="m-4">
          <div id="fb" class="relative overflow-hidden" :class="scheme, layout">
            <svg
              class="logo absolute right-0 z-10"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              version="1.1"
              id="Layer_1"
              x="0px"
              y="0px"
              viewBox="0 0 411.1 266.3"
              style="enable-background: new 0 0 411.1 266.3"
              xml:space="preserve"
            >
              <g>
                <g transform="translate(-1508.861 -8196.49)">
                  <path
                    class="logo-fill"
                    d="M1646,8396.2c-37.9,0-68.6-29.8-68.6-66.6s30.7-66.6,68.6-66.6s68.6,29.8,68.6,66.6    S1683.9,8396.2,1646,8396.2 M1920,8263.1L1920,8263.1l0-66.6c-73.4,0-133.4,55.9-137.1,126.3c-3.7-70.3-63.6-126.2-137-126.2    c-75.7,0-137.1,59.6-137.1,133.1s61.4,133.1,137.1,133.1c73.4,0,133.3-55.9,137-126.2c3.7,70.4,63.6,126.3,137.1,126.3v-66.6h0    c-37.8,0-68.6-29.9-68.6-66.6S1882.2,8263.1,1920,8263.1"
                  ></path>
                </g>
              </g>
            </svg>

            <div class="text">
              <div class="text-a">{{ textA }}</div>
              <div
                v-if="layout === 'layout-2'"
                class="text-b"
                :style="{fontSize: (22 / textB.length) + 'rem', marginRight: '-.22em'}"
              >
                {{ textB }}
              </div>
              <div
                v-else-if="layout === 'layout-6'"
                v-html="textBSplit"
                class="text-b"
                :style="{fontSize: (24 / textB.length) + 'rem'}"
              ></div>
              <div v-else class="text-b">{{ textB }}</div>
              <div v-if="layout !== 'layout-2'" class="text-c">{{ textC }}</div>
              <div class="text-d">{{ textD }}</div>
            </div>
          </div>
        </div>

        <!-- /fb canvas -->
      </div>
      <!-- / viewport -->
    </div>

    <script>
      const app = {
        data() {
          return {
            textA:
              "Trust in the Lord always. For the Lord, the Lord Himself, is the rock eternal.",
            textB: "",
            textC: "",
            // textA: "Trust in the Lord",
            // textB: "Always",
            // textC: "For the Lord,\nthe Lord Himself,\nis the rock eternal.",
            textD: "Isaiah 26:4",
            scheme: "scheme-1",
            layout: "layout-8",
          };
        },
        methods: {
          uploadImage(e) {
            const image = e.target.files[0];
            const reader = new FileReader();
            reader.readAsDataURL(image);
            reader.onload = (e) => {
              this.img = e.target.result;
              this.layout =
                this.layout === "layout-1" ? "layout-3" : this.layout;
            };
          },
          save(format) {
            const el = format;
            const scale = 3;
            const canvas = document.getElementById(el);
            domtoimage
              .toPng(canvas, {
                quality: 1,
                width: canvas.clientWidth * scale,
                height: canvas.clientHeight * scale,
                style: {
                  transform: "scale(" + scale + ")",
                  transformOrigin: "top left",
                  width: canvas.offsetWidth + "px",
                  height: canvas.offsetHeight + "px",
                },
              })
              .then(function (dataUrl) {
                var link = document.createElement("a");
                link.download = "verse_" + format + ".png";
                link.href = dataUrl;
                link.click();
              });
            // alert(format);
          },
          build() {
            this.save("ig");
            this.save("fb");
          },
        },
        computed: {
          textBSplit() {
            // return "$" + this.textB;
            return this.textB.replace(
              /(?![^<]*>)[^<]/g,
              (c) => `<span>${c}</span>\n`
            );
          },
        },
        mounted() {},
      };

      Vue.createApp(app).mount("#app");
    </script>
  </body>
</html>
